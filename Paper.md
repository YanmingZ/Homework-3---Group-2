# Research on DODODex applying Proactive AMM

### 1. DODODex's protocol, its products and our evaluation 

DODO is a decentralized exchange (DEX) that offers a range of permissionless liquidity products and solutions, including liquidity pools, crowdpooling, and fractionalized NFTs. The DODO is built on a set of smart contracts that enable a range of core features, including the DODO Vending Machine, DODO Private Pool, Crowdpooling, Liquidity Management, SmartTrade, and DODOnomics. One of the key features of DODO is its Proactive Market Making (PMM) algorithm, which is designed to efficiently incorporate important market information to enable dynamic and effective market making in the face of changing market conditions and to provide efficient liquidity provision. The PMM algorithm uses oracles to determine the actual price of an asset, and then ensures sufficient liquidity at or near this market price, while reducing availability further out, making it more efficient than traditional Automated Market Makers.

DODO V2's PMM algorithm prioritizes liquidity as the most crucial core metric of a market, which is a measure of the ease with which assets can be bought and sold without significantly affecting the asset's price. By using a depth chart that shows the volume of buy and sell orders at different price levels, the PMM algorithm dynamically adjusts the price and quantity of assets being bought and sold to maintain a balance between buyers and sellers and keep the market liquid. The algorithm takes into account the mid-price and slope of the depth chart to calculate the optimal trading strategy for each asset pair, ensuring that the market remains stable and efficient, while minimizing the risk of impermanent loss for liquidity providers.

In terms of financial metrics, DODO's market cap and total value locked (TVL) suggest that it is a mid-tier DEX in the decentralized finance (DeFi) ecosystem. As of Feb 25, 2023, the DEX has a total value locked (TVL) of $45.72 million, with a Mcap/TVL ratio of 2.32, suggesting that the protocol is currently undervalued relative to its TVL. However, the protocol's smart contracts have been audited by reputable third-party companies such as SlowMist, PeckShield, Beosin, and CertiK, indicating that the protocol takes security seriously and has taken measures to ensure that its smart contracts are secure and reliable. This can increase user confidence in the protocol and help build trust and credibility.

In addition, DODO is a multi-chain DEX available on several blockchain networks and features efficient routing algorithms that compare prices across the network to provide the best value to users. As of Feb 25, 2023, the decentralized exchange protocol DODO has seen significant trading volume across multiple chains. According to available data on DefiLama, the majority of the trading volume has occurred on Ethereum and Binance Smart Chain (BSC), with Ethereum leading with a share of approximately 60% of the total trading volume and BSC following with around 5% of the total trading volume. The remaining volume has been split among other chains such as Polygon, Arbitrum, and Aurora. In terms of fees generated by the protocol, BSC and Ethereum have generated the most fees, with BSC generating approximately 30% of the total fees and Ethereum generating around 25% of the total fees. The remaining chains have generated smaller portions of the total fees. Nevertheless, DODO has shown impressive trading volume and generated significant fees across multiple chains, indicating a strong and growing user base. 

Its powerful tools include custom tokens, liquidity mining, and dashboards. The platform has a high capital efficiency of 63.27%, with $143.11M in trading volume and $50.80M in capital locked as of 7 days ago. The platform boasts 2,110,333 users, $110.93B in all-time volume, and 18.76M total transactions. 

Overall, DODO offers a promising decentralized exchange that is focused on providing liquidity across multiple chains and offers a range of useful features to users. The PMM algorithm helps liquidity providers (LPs) and market makers concentrate their assets and provide strong liquidity without requiring significant capital, and the platform has a strong focus on security and reliability. DODO's financial metrics suggest that it is a mid-tier DEX, but its multi-chain support and efficient routing algorithms provide a strong value proposition to users. 

### 2. The machanism of DODODex

In traditional AMMs, liquidity providers (LPs) deposit equal amounts of two assets into a pool and receive tokens representing their share of the pool. Trades occur by swapping one asset for another, and the price is determined based on the ratio of the two assets in the pool. However, when there is high demand for one asset and low demand for another, the price can become volatile and lead to impermanent loss for LPs. Proactive AMMs aim to mitigate this risk by dynamically adjusting the pool ratio based on recent trades and external data from an oracle.

Suppose that $B_{0}$ and $Q_{O}$ are the initial amounts of base and quote tokens deposited by the liquidity providers respectively. In the meantime, we use $B$ and $Q$ to denote the current amounts of base and quote tokens in the pool. As can be seen easily, the target of pAMM is to keep $\frac{B}{Q}$ as closer to $\frac{B_{0}}{Q_{0}}$ as possible. When the ratio of assets in pool change, the pAMM will proactively alter the prices based on a mathematical model and imputs from an oracle, encouraging traders to push the ratio of assets to the initial level through arbitrages. The marginal prices of base and quote tokens are calculated as below:

$$P_{margin}=iR$$

where $i$ is the market price provided by the oracle, and $R$ is is defined to be the piecewise function below:

If $B < B_{0}$, then $$R=1-k+(\frac{B_{0}}{B})^{2}k$$ 
If $Q < Q_{0}$, then $$R=1/(1-k+(\frac{Q_{0}}{Q})^{2}k)$$
If $B = B_{0}$, which is equivalent to $Q = Q_{0}$, then $$R=1$$

where $k$ is the liquidity parameter set in advance. As we can see, when $k$ is 0, the protocol naively sells or buys at the market price, with no promotion on the liquidity balance. When $k$ increases to 1, the algorithm becomes the standard AMM. Normally, $k$ is recommended to be a relatively small value, such as 0.1, which could provide liquidity 10 times better than the standard AMM algorithm.

In conclusion, when a trader sells/sells base tokens, the base token balance of the capital pool is higher/lower than the base token regression target; conversely, the quote token balance is now lower/higher than the quote token regression target. In this state, the pAMM will try to sell the excess/buy the shortage base tokens, lowering/highering the base token balance and increasing/decreasing the quote token balance, in order to move this state back to the state of equilibrium. 

### 3. The use cases of DODODex

Proactive Automated Market Making aims at minimizing impermanent loss and maximizing capital efficiency by incorporating external price guidance and customized pricing strategies. There are several use cases where PMM can be particularly beneficial:

The first one is proactive market making with external price guidance. PMM can retrieve market prices from external sources for mainstream assets like BTC and ETH to adjust mid-prices and minimize impermanent loss. This use case enables single-token liquidity provision and unlocks higher capital efficiency than traditional AMM platforms.

PMM also allows for low barrier-to-entry automated market making. For long-tail asset markets, PMM can help asset issuers with initial liquidity without requiring large amounts of capital to pair up with assets. This use case gives pricing power to takers entirely and drastically reduces the barrier-to-entry for smaller projects.

PMM also provide the possibility to create fully customizable liquidity pools and free market making. This use case is intended for experienced and ambitious market makers who want the highest degree of freedom and customizability possible to execute their own market making strategies. Market makers have full control over all pool parameters, can dynamically adjust the asset price, and can deposit to and withdraw from these liquidity pools in arbitrary ratios, without affecting the asset price.

Another important use case is Crowdpooling. This use case is an innovation compared to current asset issuance mechanics. Crowdpooling allows participants to receive tokens at the same unit price and enables token trading after the conclusion of the sale. The remaining unsold tokens and liquidity collected from the last phase are used to construct a DODO Vending Machine.

Finally, PMM are also capable of supporting stablecoin trading scenarios. PMM with configurations i = 1 and k = 0.001 (or 0 for 1-to-1 ratio) is virtually identical to Curve in terms of performance and capital efficiency, with the added benefit of flexibility.
